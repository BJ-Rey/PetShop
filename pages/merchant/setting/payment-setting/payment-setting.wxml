<!-- pages/merchant/setting/payment-setting/payment-setting.wxml -->
<view class="container">
  <!-- 顶部操作栏 -->
  <view class="standard-action-bar">
    <text class="standard-back-btn" bindtap="goBack">←</text>
    <text class="page-title">支付设置</text>
  </view>

  <!-- 悬浮保存按钮 -->
  <view class="floating-save-btn" bindtap="savePaymentSetting">
    <text class="save-icon">💾</text>
    <text>保存</text>
  </view>

  <!-- 支付方式设置 -->
  <view class="setting-section card">
    <view class="section-title">支付方式</view>
    
    <!-- 微信支付 -->
    <view class="form-item toggle-item">
      <view class="form-label">
        <text class="form-icon">💳</text>
        <text>微信支付</text>
      </view>
      <switch 
        checked="{{paymentMethods.wechatPay}}" 
        bindchange="togglePaymentMethod" 
        data-type="wechatPay"
      />
    </view>
    
    <!-- 支付宝 -->
    <view class="form-item toggle-item">
      <view class="form-label">
        <text class="form-icon">💳</text>
        <text>支付宝</text>
      </view>
      <switch 
        checked="{{paymentMethods.alipay}}" 
        bindchange="togglePaymentMethod" 
        data-type="alipay"
      />
    </view>
    
    <!-- 银行卡支持 -->
    <view class="form-item toggle-item">
      <view class="form-label">
        <text class="form-icon">💳</text>
        <text>银行卡支持</text>
      </view>
      <switch 
        checked="{{paymentMethods.bankCard}}" 
        bindchange="togglePaymentMethod" 
        data-type="bankCard"
      />
    </view>
    
    <!-- 现金支付 -->
    <view class="form-item toggle-item">
      <view class="form-label">
        <text class="form-icon">💵</text>
        <text>现金支付</text>
      </view>
      <switch 
        checked="{{paymentMethods.cash}}" 
        bindchange="togglePaymentMethod" 
        data-type="cash"
      />
    </view>
    
    <!-- 余额支付 -->
    <view class="form-item toggle-item">
      <view class="form-label">
        <text class="form-icon">💰</text>
        <text>余额支付</text>
      </view>
      <switch 
        checked="{{paymentMethods.balance}}" 
        bindchange="togglePaymentMethod" 
        data-type="balance"
      />
    </view>
  </view>

  <!-- 支付配置 -->
  <view class="setting-section card">
    <view class="section-title">支付配置</view>
    
    <!-- 支付超时时间 -->
    <view class="form-item">
      <text class="form-label">支付超时时间 (分钟)</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入支付超时时间" 
        value="{{paymentTimeout}}" 
        bindinput="onInputChange" 
        data-field="paymentTimeout"
      />
    </view>
    
    <!-- 自动确认收货时间 -->
    <view class="form-item">
      <text class="form-label">自动确认收货时间 (天)</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入自动确认收货时间" 
        value="{{autoConfirmDays}}" 
        bindinput="onInputChange" 
        data-field="autoConfirmDays"
      />
    </view>
    
    <!-- 交易手续费 -->
    <view class="form-item">
      <text class="form-label">交易手续费(%)</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入交易手续费比例" 
        value="{{transactionFee}}" 
        bindinput="onInputChange" 
        data-field="transactionFee"
        step="0.01"
      />
    </view>
    
    <!-- 最小提现金额 -->
    <view class="form-item">
      <text class="form-label">最小提现金额(元)</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入最小提现金额" 
        value="{{minWithdrawAmount}}" 
        bindinput="onInputChange" 
        data-field="minWithdrawAmount"
      />
    </view>
    
    <!-- 提现手续费 -->
    <view class="form-item">
      <text class="form-label">提现手续费(%)</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入提现手续费比例" 
        value="{{withdrawFee}}" 
        bindinput="onInputChange" 
        data-field="withdrawFee"
        step="0.01"
      />
    </view>
  </view>

  <!-- 退款设置 -->
  <view class="setting-section card">
    <view class="section-title">退款设置</view>
    
    <!-- 允许退款 -->
    <view class="form-item toggle-item">
      <view class="form-label">允许退款</view>
      <switch 
        checked="{{refundSettings.allowRefund}}" 
        bindchange="toggleRefundSetting" 
        data-type="allowRefund"
      />
    </view>
    
    <!-- 退款有效期 -->
    <view class="form-item" wx:if="{{refundSettings.allowRefund}}">
      <text class="form-label">退款有效期 (天)</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入退款有效期" 
        value="{{refundSettings.refundValidity}}" 
        bindinput="onRefundInputChange" 
        data-field="refundValidity"
      />
    </view>
    
    <!-- 退款审核 -->
    <view class="form-item toggle-item" wx:if="{{refundSettings.allowRefund}}">
      <view class="form-label">需要审核退款申请</view>
      <switch 
        checked="{{refundSettings.needReview}}" 
        bindchange="toggleRefundSetting" 
        data-type="needReview"
      />
    </view>
    
    <!-- 自动退款 -->
    <view class="form-item toggle-item" wx:if="{{refundSettings.allowRefund && !refundSettings.needReview}}">
      <view class="form-label">自动处理退款</view>
      <switch 
        checked="{{refundSettings.autoRefund}}" 
        bindchange="toggleRefundSetting" 
        data-type="autoRefund"
      />
    </view>
    
    <!-- 退款手续费 -->
    <view class="form-item" wx:if="{{refundSettings.allowRefund}}">
      <text class="form-label">退款手续费 (%)</text>
      <input 
        class="form-input" 
        type="number" 
        placeholder="请输入退款手续费比例" 
        value="{{refundSettings.refundFee}}" 
        bindinput="onRefundInputChange" 
        data-field="refundFee"
        step="0.01"
      />
    </view>
  </view>

  <!-- 支付通知 -->
  <view class="setting-section card">
    <view class="section-title">支付通知</view>
    
    <!-- 支付成功通知 -->
    <view class="form-item toggle-item">
      <view class="form-label">支付成功通知</view>
      <switch 
        checked="{{notificationSettings.paymentSuccess}}" 
        bindchange="toggleNotificationSetting" 
        data-type="paymentSuccess"
      />
    </view>
    
    <!-- 退款成功通知 -->
    <view class="form-item toggle-item">
      <view class="form-label">退款成功通知</view>
      <switch 
        checked="{{notificationSettings.refundSuccess}}" 
        bindchange="toggleNotificationSetting" 
        data-type="refundSuccess"
      />
    </view>
    
    <!-- 提现成功通知 -->
    <view class="form-item toggle-item">
      <view class="form-label">提现成功通知</view>
      <switch 
        checked="{{notificationSettings.withdrawSuccess}}" 
        bindchange="toggleNotificationSetting" 
        data-type="withdrawSuccess"
      />
    </view>
    
    <!-- 支付失败通知 -->
    <view class="form-item toggle-item">
      <view class="form-label">支付失败通知</view>
      <switch 
        checked="{{notificationSettings.paymentFailed}}" 
        bindchange="toggleNotificationSetting" 
        data-type="paymentFailed"
      />
    </view>
  </view>

  <!-- 支付渠道配置 -->
  <view class="setting-section card">
    <view class="section-title">支付渠道配置</view>
    
    <!-- 微信支付配置 -->
    <view class="payment-channel" wx:if="{{paymentMethods.wechatPay}}">
      <view class="channel-title">微信支付配置</view>
      <button class="configure-btn" bindtap="configureWechatPay">配置微信支付</button>
    </view>
    
    <!-- 支付宝配置 -->
    <view class="payment-channel" wx:if="{{paymentMethods.alipay}}">
      <view class="channel-title">支付宝配置</view>
      <button class="configure-btn" bindtap="configureAlipay">配置支付宝</button>
    </view>
    
    <!-- 银行卡支持配置 -->
    <view class="payment-channel" wx:if="{{paymentMethods.bankCard}}">
      <view class="channel-title">银行卡支持配置</view>
      <button class="configure-btn" bindtap="configureBankCard">配置银行卡支持</button>
    </view>
  </view>
</view>
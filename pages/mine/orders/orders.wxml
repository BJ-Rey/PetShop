<!--pages/mine/orders/orders.wxml-->
<view class="container">
  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="standard-action-bar">
    <text class="standard-back-btn" bindtap="navigateBack">â†</text>
    <text class="page-title">{{status === '' ? 'å…¨éƒ¨è®¢å•' : orderStatusMap[status]}}</text>
  </view>

  <!-- è®¢å•çŠ¶æ€ç­›é€‰ -->
  <view class="order-status-filter">
    <view class="filter-item {{status === '' ? 'active' : ''}}" bindtap="switchOrderStatus" data-status="">
      å…¨éƒ¨
    </view>
    <view class="filter-item {{status === 'pending' ? 'active' : ''}}" bindtap="switchOrderStatus" data-status="pending">
      å¾…ä»˜æ¬¾
    </view>
    <view class="filter-item {{status === 'shipping' ? 'active' : ''}}" bindtap="switchOrderStatus" data-status="shipping">
      å¾…å‘è´§
    </view>
    <view class="filter-item {{status === 'delivering' ? 'active' : ''}}" bindtap="switchOrderStatus" data-status="delivering">
      å¾…æ”¶è´§
    </view>
    <view class="filter-item {{status === 'completed' ? 'active' : ''}}" bindtap="switchOrderStatus" data-status="completed">
      å·²å®Œæˆ
    </view>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list">
    <view class="order-item" wx:for="{{orders}}" wx:key="id">
      <view class="order-header">
        <text class="order-id">è®¢å•å·ï¼š{{item.id}}</text>
        <text class="order-status">{{item.statusText}}</text>
      </view>
      <view class="order-content">
        <image src="{{item.image}}" class="product-image" mode="aspectFill"></image>
        <view class="product-info">
          <text class="product-name">{{item.productName}}</text>
          <text class="product-sku">{{item.sku}}</text>
        </view>
        <text class="product-price">Â¥{{item.price}}</text>
      </view>
      <view class="order-footer">
        <text class="order-total">å…±{{item.quantity}}ä»¶å•†å“ï¼Œæ€»ä»·ï¼šÂ¥{{item.totalPrice}}</text>
        <view class="order-actions">
          <button class="action-btn" wx:if="{{item.status === 'pending'}}" bindtap="payOrder" data-id="{{item.id}}">ç«‹å³ä»˜æ¬¾</button>
          <button class="action-btn" wx:if="{{item.status === 'delivering'}}" bindtap="confirmReceive" data-id="{{item.id}}">ç¡®è®¤æ”¶è´§</button>
          <button class="action-btn" wx:if="{{item.status === 'completed'}}" bindtap="evaluateOrder" data-id="{{item.id}}">è¯„ä»·</button>
          <button class="action-btn" bindtap="viewOrderDetail" data-id="{{item.id}}">æŸ¥çœ‹è¯¦æƒ…</button>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{orders.length === 0}}">
    <text class="empty-icon">ğŸ“¦</text>
    <text class="empty-text">æš‚æ— è®¢å•</text>
  </view>
</view>
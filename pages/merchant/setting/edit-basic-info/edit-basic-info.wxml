<!-- pages/merchant/setting/edit-basic-info/edit-basic-info.wxml -->
<view class="container">
  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="standard-action-bar">
    <text class="standard-back-btn" bindtap="goBack">â†</text>
    <text class="page-title">ç¼–è¾‘å•†å®¶åŸºæœ¬ä¿¡æ¯</text>
  </view>

  <!-- ä¿å­˜çŠ¶æ€æç¤º -->
  <view class="save-status {{saveStatus === 'saved' ? 'saved' : saveStatus === 'saving' ? 'saving' : 'unsaved'}}" wx:if="{{showSaveStatus}}">
    <text class="status-icon">{{saveStatus === 'saved' ? 'âœ…' : saveStatus === 'saving' ? 'ğŸ”„' : 'âš ï¸'}}</text>
    <text class="status-text">{{saveStatus === 'saved' ? 'å·²ä¿å­˜' : saveStatus === 'saving' ? 'ä¿å­˜ä¸­..' : 'æœ‰æœªä¿å­˜çš„ä¿®æ”¹'}}</text>
  </view>

  <!-- æ‚¬æµ®ä¿å­˜æŒ‰é’® -->
  <view class="floating-save-btn" bindtap="saveMerchantInfo" data-form-type="submit">
    <text class="save-icon">ğŸ’¾</text>
    <text>ä¿å­˜</text>
  </view>

  <!-- è¡¨å•å†…å®¹ -->
  <form class="form-container" bindsubmit="saveMerchantInfo">
    <!-- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
    <view class="info-card">
      <text class="card-title">åŸºæœ¬ä¿¡æ¯</text>
      <view class="card-content">
        <!-- å•†å®¶åç§° -->
        <view class="form-item">
          <text class="form-label">å•†å®¶åç§° <text class="required">*</text></text>
          <input 
            class="form-input" 
            name="name" 
            placeholder="è¯·è¾“å…¥å•†å®¶åç§°" 
            value="{{merchantInfo.name}}" 
            bindinput="onInputChange" 
            data-field="name"
            maxlength="50"
          />
          <text class="error-text">{{errors.name}}</text>
        </view>

        <!-- å•†å®¶æè¿° -->
        <view class="form-item">
          <text class="form-label">å•†å®¶æè¿°</text>
          <textarea 
            class="form-textarea" 
            name="description" 
            placeholder="è¯·è¾“å…¥å•†å®¶æè¿°" 
            value="{{merchantInfo.description}}" 
            bindinput="onInputChange" 
            data-field="description"
            maxlength="200"
            auto-height
            style="height: 120rpx; min-height: 120rpx;"
          />
          <text class="text-count">{{merchantInfo.description.length || 0}}/200</text>
          <text class="error-text">{{errors.description}}</text>
        </view>
      </view>
    </view>

    <!-- è”ç³»æ–¹å¼å¡ç‰‡ -->
    <view class="info-card">
      <text class="card-title">è”ç³»æ–¹å¼</text>
      <view class="card-content">
        <!-- è”ç³»æ–¹å¼ -->
        <view class="form-item">
          <text class="form-label">è”ç³»ç”µè¯ <text class="required">*</text></text>
          <input 
            class="form-input" 
            name="phone" 
            placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç " 
            value="{{merchantInfo.phone}}" 
            bindinput="onInputChange" 
            data-field="phone"
            type="number"
            maxlength="11"
          />
          <text class="error-text">{{errors.phone}}</text>
        </view>

        <!-- è”ç³»äºº -->
        <view class="form-item">
          <text class="form-label">è”ç³»äºº</text>
          <input 
            class="form-input" 
            name="contactPerson" 
            placeholder="è¯·è¾“å…¥è”ç³»äººå§“å" 
            value="{{merchantInfo.contactPerson}}" 
            bindinput="onInputChange" 
            data-field="contactPerson"
            maxlength="20"
          />
          <text class="error-text">{{errors.contactPerson}}</text>
        </view>

        <!-- è”ç³»é‚®ç®± -->
        <view class="form-item">
          <text class="form-label">è”ç³»é‚®ç®±</text>
          <input 
            class="form-input" 
            name="email" 
            placeholder="è¯·è¾“å…¥è”ç³»é‚®ç®±" 
            value="{{merchantInfo.email}}" 
            bindinput="onInputChange" 
            data-field="email"
            type="text"
            maxlength="50"
          />
          <text class="error-text">{{errors.email}}</text>
        </view>
      </view>
    </view>

    <!-- åœ°å€ä¿¡æ¯å¡ç‰‡ -->
    <view class="info-card">
      <text class="card-title">åœ°å€ä¿¡æ¯</text>
      <view class="card-content">
        <!-- å•†å®¶åœ°å€ -->
        <view class="form-item">
          <text class="form-label">å•†å®¶åœ°å€ <text class="required">*</text></text>
          <input 
            class="form-input" 
            name="address" 
            placeholder="è¯·è¾“å…¥å•†å®¶åœ°å€" 
            value="{{merchantInfo.address}}" 
            bindinput="onInputChange" 
            data-field="address"
            maxlength="100"
          />
          <text class="error-text">{{errors.address}}</text>
        </view>
      </view>
    </view>

    <!-- èµ„è´¨ä¿¡æ¯å¡ç‰‡ -->
    <view class="info-card">
      <text class="card-title">èµ„è´¨ä¿¡æ¯</text>
      <view class="card-content">
        <!-- è¥ä¸šæ‰§ç…§ -->
        <view class="form-item">
          <text class="form-label">è¥ä¸šæ‰§ç…§ç¼–å· <text class="required">*</text></text>
          <input 
            class="form-input" 
            name="businessLicense" 
            placeholder="è¯·è¾“å…¥è¥ä¸šæ‰§ç…§ç¼–å·" 
            value="{{merchantInfo.businessLicense}}" 
            bindinput="onInputChange" 
            data-field="businessLicense"
            maxlength="20"
          />
          <text class="error-text">{{errors.businessLicense}}</text>
        </view>
      </view>
    </view>

    <!-- åº—é“ºçŠ¶æ€å¡ç‰‡ -->
    <view class="info-card">
      <text class="card-title">åº—é“ºçŠ¶æ€</text>
      <view class="card-content">
        <view class="form-item status-item">
          <text class="form-label">è¥ä¸šçŠ¶æ€</text>
          <view class="status-switch">
            <text class="status-text">{{merchantInfo.status === 'open' ? 'è¥ä¸šä¸­' : 'å·²å…³é—­'}}</text>
            <switch 
              checked="{{merchantInfo.status === 'open'}}" 
              bindchange="toggleStatus"
              color="#07c160"
            />
          </view>
        </view>
      </view>
    </view>
  </form>
</view>
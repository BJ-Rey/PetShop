<!-- pages/merchant/customer/customer.wxml -->
<view class="container">
  <!-- é¡¶éƒ¨æ“ä½œæ  -->
  <view class="standard-action-bar">
    <text class="standard-back-btn" bindtap="navigateBack">è¿”å›</text>
    <text class="page-title">å®¢æˆ·ç®¡ç†</text>
    <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <input 
      class="search-input" 
      placeholder="æœç´¢å®¢æˆ·åç§°æˆ–æ‰‹æœºå·" 
      bindinput="onSearch"
      value="{{keyword}}"
    />
  </view>

  <!-- å®¢æˆ·åˆ—è¡¨ -->
  <view class="customer-list">
    <view class="empty-state" wx:if="{{!isLoading && customers.length === 0}}">
      <text class="empty-icon">ğŸ‘¥</text>
      <text class="empty-text">æš‚æ— å®¢æˆ·æ•°æ®</text>
    </view>
    
    <view class="loading-state" wx:if="{{isLoading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
    
    <block wx:else>
      <view class="customer-item card" wx:for="{{customers}}" wx:key="id">
        <!-- å®¢æˆ·åŸºæœ¬ä¿¡æ¯ -->
        <view class="customer-info">
          <image class="customer-avatar" src="{{item.avatar || 'https://example.com/default-avatar.png'}}"></image>
          
          <view class="customer-details">
            <view class="customer-header">
              <text class="customer-name">{{item.name}}</text>
              <text class="customer-type">{{item.type === 'vip' ? 'VIPå®¢æˆ·' : 'æ™®é€šå®¢æˆ·'}}</text>
            </view>
            
            <text class="customer-phone">{{item.phone}}</text>
            <text class="customer-email">{{item.email || 'æœªè®¾ç½®é‚®ç®±'}}</text>
          </view>
        </view>
        
        <!-- å®¢æˆ·ç»Ÿè®¡ä¿¡æ¯ -->
        <view class="customer-stats">
          <view class="stat-item">
            <text class="stat-value">{{item.orderCount}}</text>
            <text class="stat-label">è®¢å•æ•°</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">Â¥{{item.totalSpent}}</text>
            <text class="stat-label">æ€»æ¶ˆè´¹</text>
          </view>
          <view class="stat-item">
            <text class="stat-value">{{item.lastOrderDate}}</text>
            <text class="stat-label">æœ€è¿‘è®¢å•</text>
          </view>
        </view>
        
        <!-- æ“ä½œæŒ‰é’® -->
        <view class="customer-actions">
          <button 
            class="action-btn view-btn" 
            bindtap="viewCustomerDetail" 
            data-id="{{item.id}}"
          >
            æŸ¥çœ‹è¯¦æƒ…
          </button>
          <button 
            class="action-btn edit-btn" 
            bindtap="editCustomer" 
            data-id="{{item.id}}"
          >
            ç¼–è¾‘
          </button>
          <button 
            class="action-btn message-btn" 
            bindtap="sendMessage" 
            data-id="{{item.id}}"
          >
            å‘é€æ¶ˆæ¯
          </button>
        </view>
      </view>
    </block>
  </view>
</view>
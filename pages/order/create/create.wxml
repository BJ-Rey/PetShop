<!--pages/order/create/create.wxml-->
<view class="container">
  <!-- 收货地址 -->
  <view class="address-section card" bindtap="chooseAddress">
    <block wx:if="{{address}}">
      <view class="address-info">
        <view class="contact-info">
          <text class="name">{{address.userName}}</text>
          <text class="phone">{{address.telNumber}}</text>
        </view>
        <view class="address-detail">
          {{address.provinceName}}{{address.cityName}}{{address.countyName}}{{address.detailInfo}}
        </view>
      </view>
      <text class="arrow">></text>
    </block>
    <block wx:else>
      <view class="add-address">
        <text class="icon">+</text>
        <text>添加收货地址</text>
      </view>
      <text class="arrow">></text>
    </block>
  </view>

  <!-- 商品列表 -->
  <view class="goods-section card">
    <block wx:for="{{orderItems}}" wx:key="id">
      <view class="goods-item">
        <image src="{{item.image}}" class="goods-image" mode="aspectFill"></image>
        <view class="goods-info">
          <text class="goods-name">{{item.name}}</text>
          <view class="goods-meta" wx:if="{{item.type === 'pet'}}">
            <text>定金支付</text>
          </view>
          <view class="goods-meta" wx:else>
            <text>{{item.sku || '默认规格'}}</text>
          </view>
          <view class="goods-price-row">
            <text class="price">¥{{item.price}}</text>
            <text class="quantity">x{{item.quantity}}</text>
          </view>
        </view>
      </view>
    </block>
  </view>

  <!-- 费用明细 -->
  <view class="cost-section card">
    <view class="cost-item">
      <text>商品总额</text>
      <text>¥{{totalPrice}}</text>
    </view>
    <view class="cost-item">
      <text>运费</text>
      <text>¥{{freight}}</text>
    </view>
    <view class="cost-item total">
      <text>实付款</text>
      <text class="total-price">¥{{actualPrice}}</text>
    </view>
  </view>

  <!-- 底部支付栏 -->
  <view class="footer-bar">
    <view class="total-info">
      <text>合计：</text>
      <text class="price">¥{{actualPrice}}</text>
    </view>
    <button class="pay-btn" bindtap="submitOrder" loading="{{isSubmitting}}">微信支付</button>
  </view>
</view>